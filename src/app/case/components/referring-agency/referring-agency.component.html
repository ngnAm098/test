<form fxLayout="column" [formGroup]="referringAgencyForm">
  <div fxFlex="1 0 auto" fxLayout="column">
    <mat-form-field class="example-full-width" appearance="outline" fxFlex="100">
      <mat-label>Referring Agency</mat-label>
      <mat-select formControlName="referringAgencyId" (selectionChange)="toggleTitle($event)">
        <mat-option *ngFor="let agency of agencys" [value]="agency.id">{{ agency.agencyName }}</mat-option>
      </mat-select>
      <mat-error>Referring Agency is required!</mat-error>
    </mat-form-field>
    <mat-form-field class="example-full-width" appearance="outline" fxFlex="100">
      <mat-label>Case Name</mat-label>
      <input matInput formControlName="caseName" />
      <mat-error>Case Name is required!</mat-error>
    </mat-form-field>
    <mat-form-field class="example-full-width" appearance="outline" fxFlex="100">
      <mat-label>Referral Case No.</mat-label>
      <input matInput formControlName="referralCaseNo" />
      <mat-error>Referral Case No. is required!</mat-error>
    </mat-form-field>
    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>Select a date</mat-label>
      <input matInput [matDatepicker]="picker" [max]="maxDate" formControlName="forwardingDate" (click)="picker.open()"
        readonly />
      <mat-datepicker-toggle matSuffix [for]="picker"> </mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
      <mat-error>Forwarding date is required!</mat-error>
    </mat-form-field>
    <mat-form-field class="example-full-width" appearance="outline" fxFlex="100">
      <mat-label>Case Type</mat-label>
      <mat-select formControlName="caseTypeId" (selectionChange)="changeVictimForm($event)">
        <mat-option *ngFor="let caseType of caseTypes" [value]="caseType.id">{{ caseType.caseTypeName }}</mat-option>
      </mat-select>
      <mat-error>Case Type is required!</mat-error>
    </mat-form-field>
    <mat-form-field class="example-full-width" appearance="outline" fxFlex="100">
      <mat-label>Offence</mat-label>
      <mat-select formControlName="offence">
        <mat-option *ngFor="let offence of offences" [value]="offence.offenceName">{{
          offence.offenceName
          }}</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field class="example-full-width" appearance="outline" fxFlex="100">
      <mat-label>Evidence</mat-label>
      <input matInput formControlName="evidence" />
    </mat-form-field>
    <mat-form-field class="example-full-width" appearance="outline" fxFlex="100">
      <mat-label>Jurisdiction</mat-label>
      <mat-select formControlName="jurisdictionId">
        <mat-option *ngFor="let jurisdiction of jurisdictions" [value]="jurisdiction.id">{{
          jurisdiction.jurisdictionName
          }}</mat-option>
      </mat-select>
      <mat-error>Jurisdiction is required!</mat-error>
    </mat-form-field>
    <mat-form-field class="example-full-width" appearance="outline" fxFlex="100">
      <mat-label>Remand Period</mat-label>
      <input matInput type="number" formControlName="remandPeriod" />
    </mat-form-field>
  </div>
  <div *ngIf="role !== 'Prosecutor'" fxLayout="row" fxLayoutAlign="center center">
    <button mat-raised-button type="button" color="primary" (click)="saveReferingAgencyEmit()"
      [disabled]="!referringAgencyForm.valid">
      <mat-icon>save</mat-icon> Save
    </button>
  </div>

  <div *ngIf="role === 'Prosecutor'" fxLayout="row" fxLayoutAlign="center center">
    <button mat-raised-button type="button" color="primary" (click)="saveReferingAgencyEmit()"
      [disabled]="!referringAgencyForm.valid">
      <mat-icon>update</mat-icon> Update
    </button>
  </div>

</form>